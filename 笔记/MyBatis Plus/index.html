<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MyBatis-Plus学习 | YuanYE</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="Kori Lin BLOG">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" conetent="KORILIN">
    <meta name="twitter:creator" conetent="@Kori_Lin">
    
    <link rel="preload" href="/blog/assets/css/1.styles.1f37ec6d.css" as="style"><link rel="preload" href="/blog/assets/js/app.3aaa0c49.js" as="script"><link rel="preload" href="/blog/assets/js/4.bf1654a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.73419e87.js"><link rel="prefetch" href="/blog/assets/js/11.05829631.js"><link rel="prefetch" href="/blog/assets/js/12.7e8086c5.js"><link rel="prefetch" href="/blog/assets/js/13.f1400667.js"><link rel="prefetch" href="/blog/assets/js/14.c6dd0951.js"><link rel="prefetch" href="/blog/assets/js/15.0f37c6f6.js"><link rel="prefetch" href="/blog/assets/js/16.a4662ec0.js"><link rel="prefetch" href="/blog/assets/js/17.e8372a64.js"><link rel="prefetch" href="/blog/assets/js/18.37715e79.js"><link rel="prefetch" href="/blog/assets/js/19.e397b51f.js"><link rel="prefetch" href="/blog/assets/js/2.1e961ff5.js"><link rel="prefetch" href="/blog/assets/js/20.19f61b49.js"><link rel="prefetch" href="/blog/assets/js/21.3b043514.js"><link rel="prefetch" href="/blog/assets/js/22.60b4227d.js"><link rel="prefetch" href="/blog/assets/js/23.0dbcd6f8.js"><link rel="prefetch" href="/blog/assets/js/24.b5bb6a2c.js"><link rel="prefetch" href="/blog/assets/js/25.f36cd997.js"><link rel="prefetch" href="/blog/assets/js/26.2173183c.js"><link rel="prefetch" href="/blog/assets/js/27.7e05cc7c.js"><link rel="prefetch" href="/blog/assets/js/28.bcba955e.js"><link rel="prefetch" href="/blog/assets/js/29.f0b4c45b.js"><link rel="prefetch" href="/blog/assets/js/3.58551e39.js"><link rel="prefetch" href="/blog/assets/js/30.04c3ed65.js"><link rel="prefetch" href="/blog/assets/js/5.cb45b255.js"><link rel="prefetch" href="/blog/assets/js/6.aa9fd703.js"><link rel="prefetch" href="/blog/assets/js/7.a807b0d2.js"><link rel="prefetch" href="/blog/assets/js/8.29c46423.js"><link rel="prefetch" href="/blog/assets/js/9.58f55c6f.js">
    <link rel="stylesheet" href="/blog/assets/css/1.styles.1f37ec6d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><span><div id="sidebar" data-v-6e67c360><div class="PC-sidebar" data-v-6e67c360><div class="title" data-v-6e67c360>
            @<span data-v-6e67c360>YuanYE</span></div> <a href="/blog/" class="router-link-active bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home" data-v-7201a518><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-v-7201a518></path> <polyline points="9 22 9 12 15 12 15 22" data-v-7201a518></polyline></svg> <!----> <!----></div> <div class="name" data-v-7201a518>Home</div></a> <a href="/blog/archive" class="bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><!----> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-book" data-v-7201a518><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-v-7201a518></path> <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-v-7201a518></path></svg> <!----></div> <div class="name" data-v-7201a518>Archive</div></a> <a href="/blog/about/" class="bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><!----> <!----> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user" data-v-7201a518><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-v-7201a518></path> <circle cx="12" cy="7" r="4" data-v-7201a518></circle></svg></div> <div class="name" data-v-7201a518>About</div></a></div> <!----></div><div class="main"><div class="wrap" data-v-5d573f62><div class="post" data-v-5d573f62><div class="title" data-v-5d573f62><h1 data-v-5d573f62>MyBatis-Plus学习</h1></div> <div class="info" data-v-5d573f62><div class="date" data-v-382026d3 data-v-5d573f62><div class="svg" data-v-382026d3><svg t="1610177893433" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5858" width="16" height="16" class="icon" data-v-382026d3><path d="M512 192c179.2 0 320 140.8 320 320s-140.8 320-320 320-320-140.8-320-320S332.8 192 512 192M512 128C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128L512 128z" p-id="5859" fill="#707070" data-v-382026d3></path> <path d="M640 672c-6.4 0-19.2 0-25.6-6.4l-128-128C486.4 531.2 480 518.4 480 512L480 288C480 268.8 492.8 256 512 256s32 12.8 32 32l0 211.2 121.6 121.6c12.8 12.8 12.8 32 0 44.8C659.2 672 646.4 672 640 672z" p-id="5860" fill="#707070" data-v-382026d3></path></svg></div> <div class="content" data-v-382026d3>2020-11-19</div></div> <div class="category" data-v-a6fce850 data-v-5d573f62><div class="svg" data-v-a6fce850><svg t="1610177808699" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4460" width="16" height="16" class="icon" data-v-a6fce850><path d="M725.290667 725.290667m-213.333334 0a213.333333 213.333333 0 1 0 426.666667 0 213.333333 213.333333 0 1 0-426.666667 0Z" p-id="4461" fill="#707070" data-v-a6fce850></path> <path d="M789.205333 234.794667m-149.333333 0a149.333333 149.333333 0 1 0 298.666667 0 149.333333 149.333333 0 1 0-298.666667 0Z" p-id="4462" fill="#707070" data-v-a6fce850></path> <path d="M235.861333 788.138667m-149.333333 0a149.333333 149.333333 0 1 0 298.666667 0 149.333333 149.333333 0 1 0-298.666667 0Z" p-id="4463" fill="#707070" data-v-a6fce850></path> <path d="M298.709333 298.709333m-213.333333 0a213.333333 213.333333 0 1 0 426.666667 0 213.333333 213.333333 0 1 0-426.666667 0Z" p-id="4464" fill="#707070" data-v-a6fce850></path></svg></div> <div class="content" data-v-a6fce850>笔记</div></div> <div class="tags" data-v-2ed44237 data-v-5d573f62><div class="svg" data-v-2ed44237><svg t="1610177743508" viewBox="0 0 1085 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2934" width="16" height="16" class="icon" data-v-2ed44237><path d="M256 256q0-30.285714-21.428571-51.714286T182.857143 182.857143t-51.714286 21.428571T109.714286 256t21.428571 51.714286T182.857143 329.142857t51.714286-21.428571T256 256z m609.714286 329.142857q0 30.285714-21.142857 51.428572l-280.571429 281.142857q-22.285714 21.142857-52 21.142857-30.285714 0-51.428571-21.142857L52 508.571429q-21.714286-21.142857-36.857143-57.714286T0 384V146.285714q0-29.714286 21.714286-51.428571t51.428571-21.714286h237.714286q30.285714 0 66.857143 15.142857T436 125.142857l408.571429 408q21.142857 22.285714 21.142857 52z m219.428571 0q0 30.285714-21.142857 51.428572l-280.571429 281.142857q-22.285714 21.142857-52 21.142857-20.571429 0-33.714285-8t-30.285715-25.714286l268.571429-268.571428q21.142857-21.142857 21.142857-51.428572 0-29.714286-21.142857-52L527.428571 125.142857q-21.714286-21.714286-58.285714-36.857143T402.285714 73.142857h128q30.285714 0 66.857143 15.142857t58.285714 36.857143l408.571429 408q21.142857 22.285714 21.142857 52z" p-id="2935" fill="#8a8a8a" data-v-2ed44237></path></svg></div> <div class="content" data-v-2ed44237><span class="tag" style="color:#F994AB;" data-v-2ed44237>
            MyBatis-Plus
        </span></div></div></div> <div class="line" data-v-5d573f62></div> <div class="content" data-v-5d573f62><div class="content__default" data-v-5d573f62><h1 id="_1-快速入门"><a href="#_1-快速入门" class="header-anchor">#</a> 1. 快速入门</h1> <p>官网地址：https://mp.baomidou.com/guide/quick-start.html</p> <h2 id="_1-1-准备数据库"><a href="#_1-1-准备数据库" class="header-anchor">#</a> 1.1 准备数据库</h2> <hr> <p>现有一张 <code>User</code> 表，其表结构如下：</p> <table><thead><tr><th>id</th> <th>name</th> <th>age</th> <th>email</th></tr></thead> <tbody><tr><td>1</td> <td>Jone</td> <td>18</td> <td>test1@baomidou.com</td></tr> <tr><td>2</td> <td>Jack</td> <td>20</td> <td>test2@baomidou.com</td></tr> <tr><td>3</td> <td>Tom</td> <td>28</td> <td>test3@baomidou.com</td></tr> <tr><td>4</td> <td>Sandy</td> <td>21</td> <td>test4@baomidou.com</td></tr> <tr><td>5</td> <td>Billie</td> <td>24</td> <td>test5@baomidou.com</td></tr></tbody></table> <p>其对应的数据库 Schema 脚本如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token punctuation">(</span>
	id <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键ID'</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
	age <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span>
	email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱'</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其对应的数据库 Data 脚本如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Jone'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'test1@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'test2@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">'test3@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Sandy'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'test4@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Billie'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'test5@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_1-2-创建项目-导入依赖"><a href="#_1-2-创建项目-导入依赖" class="header-anchor">#</a> 1.2 创建项目，导入依赖</h2> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--        数据库驱动--&gt;</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--mybatis-plus 导入plus后不需要再导入mybatis--&gt;</span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_1-3-配置数据库连接池"><a href="#_1-3-配置数据库连接池" class="header-anchor">#</a> 1.3 配置数据库连接池</h2> <p>在 <code>application.yml</code> 配置文件中添加数据库的相关配置：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/test<span class="token punctuation">?</span>useSSL=false<span class="token important">&amp;userUnicode=true&amp;characterEncoding=UTF-</span><span class="token number">8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
</code></pre></div><h2 id="_1-4-pojo-mapper-service"><a href="#_1-4-pojo-mapper-service" class="header-anchor">#</a> 1.4 pojo-mapper-service</h2> <ul><li><p>pojo</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>mapper</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*
    使用mybatis-plus可以大大简化之前对mybatis的配置
    mybatis-plus定义了增删改查的操作，我们在使用时只需要将自己的mapper接口继承BaseMapper&lt;T&gt;即可。
    不需要自己编写mapper.xml,但是需要在启动类上加入注解@MapperScan(包名)，如：@MapperScan(&quot;com.yy.mybatis_plus.mapper&quot;)
 */</span>
<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">//启动类</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.yy.mybatis_plus.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MybatisPlusApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>service</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//UserService,继承Iservice&lt;T&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">//UserServcieImpl,实现UserService并继承ServiceImpl&lt;M, T&gt;,M为mapper，T为泛型</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="_1-5-测试"><a href="#_1-5-测试" class="header-anchor">#</a> 1.5 测试</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">MybatisPlusApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">UserServie</span> userServie<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userServie<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210329131640731.d6fd2c45.png" alt="image-20210329131640731"></p> <h1 id="_2-配置日志"><a href="#_2-配置日志" class="header-anchor">#</a> 2. 配置日志</h1> <p>在使用mybatis-plus时，所有的sql说不可见的，我们希望它是怎么执行的，所以我们必须要看日志</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">#日志配置</span>
<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre></div><p><img src="/blog/assets/img/image-20210329132232211.ded496d0.png" alt="image-20210329132232211"></p> <h1 id="_3-crud扩展-mapper"><a href="#_3-crud扩展-mapper" class="header-anchor">#</a> 3. CRUD扩展（mapper）</h1> <p>CRUD接口定义官方地址：https://mp.baomidou.com/guide/crud-interface.html#service-crud-%E6%8E%A5%E5%8F%A3</p> <h2 id="_3-1-插入"><a href="#_3-1-插入" class="header-anchor">#</a> 3.1 插入</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//    插入测试</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">&quot;123456@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//自动生成id</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//受影响的行数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//id会自动回填</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210330222423506.3476cbdf.png" alt=""></p> <p>==id怎么生成的？==<strong>要去了解主键生成策略</strong></p> <blockquote><p>要知道数据库插入的id默认值为：全局唯一的id</p></blockquote> <h3 id="_3-1-1主键生成策略"><a href="#_3-1-1主键生成策略" class="header-anchor">#</a> 3.1.1主键生成策略</h3> <p><strong>有uuid、自增id、雪花算法、redis、zookeeper</strong></p> <p><strong>1. 默认 ID_WORKER 全局唯一id</strong></p> <p><strong>2. 主键自增</strong></p> <p>我们需要配置主键自增：</p> <ul><li><p>实体类字段上添加<code>@TableId(type = IdType.AUTO)</code></p></li> <li><p>数据库字段一定要是自增！</p></li> <li><p>再次插入测试</p> <p><img src="/blog/assets/img/image-20210330222508409.c3b44465.png" alt="image-20210330222508409"></p> <p><img src="/blog/assets/img/image-20210330222629756.586fbad2.png" alt="image-20210330222629756"></p> <p><strong>3. 其他的源码解释</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token function">AUTO</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//数据库id自增</span>
    <span class="token function">NONE</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//未设置主键</span>
    <span class="token function">INPUT</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//手动输入,一旦选择必须手动设置id值</span>
    <span class="token function">ASSIGN_ID</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//</span>
    <span class="token function">ASSIGN_UUID</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">/** @deprecated */</span>
    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token function">ID_WORKER</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//默认的全局唯一id</span>
    <span class="token comment">/** @deprecated */</span>
    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token function">ID_WORKER_STR</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//ID_WORKER字符串表示法</span>
    <span class="token comment">/** @deprecated */</span>
    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token function">UUID</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//全局唯一id，uuid</span>
</code></pre></div></li></ul> <p>分布式系统唯一id生成：https://blog.csdn.net/cyl101816/article/details/107002852</p> <p>**雪花算法：**snowflake是Twitter开源的分布式ID生成算法，结果是一个long型的ID。其核心思想是：使用41bit作为毫秒数，10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID），12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID），最后还有一个符号位，永远是0。具体实现的代码可以参看https://github.com/twitter/snowflake。</p> <h2 id="_3-2-更新操作"><a href="#_3-2-更新操作" class="header-anchor">#</a> 3.2 更新操作</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//    测试更新操作</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;yuanye&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        注意：updateById（）传入的参数是一个对象</span>
        userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210331150540453.6950e6b3.png" alt="image-20210331150540453"></p> <p><strong>能够注意到sql语句为update操作，即所有的sql都是自动帮我们动态配置的！</strong></p> <h3 id="自动填充"><a href="#自动填充" class="header-anchor">#</a> 自动填充</h3> <p>创建时间、修改时间。这些操作一般都是自动化完成的，我们不希望手动更新！</p> <p>阿里巴巴开发手册：所有的数据库表都应该包含：gmt_create、gmt_modified（gmt：是指格林尼治所在地的标准时间）,而且需要自动化！</p> <ul><li><p>方式一：数据库级别（工作中不允许更改数据库）</p> <ol><li><p>在表中新增字段 create_time、update_time，数据类型为datetime；默认值为：CURRENT_TIMESTAMP</p> <p><img src="data:image/png;base64,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BgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnADAAAkQbgBAACSINwAAABJEG4AAIAkCDcAAEAShBsAACAJwg0AAJAE4QYAAEiCcAMAACRBuAEAAJIg3AAAAEkQbgAAgCQINwAAQBKEGwAAIAnCDQAAkAThBgAASIJwAwAAJEG4AQAAkiDcAAAASRBuAACAJAg3AABAEoQbAAAgCcINAACQBOEGAABIgnAD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" alt="image-20210331154857908"></p> <p>update_time还要根据当前时间戳更新。</p></li></ol></li> <li><p>方式二：代码级别</p> <p>官方地址；https://mp.baomidou.com/guide/auto-fill-metainfo.html</p> <ol><li><p>在成员变量create_time、update_time添加注解，并且不设置表中该字段的默认值和根据当前时间戳更新</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT<span class="token punctuation">)</span>  <span class="token comment">//插入时自动填充</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT_UPDATE<span class="token punctuation">)</span> <span class="token comment">//插入和修改时自动填充</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>自定义实现类 MyMetaObjectHandler</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">//一定不要忘记把处理器加到IOC容器中</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMetaObjectHandler</span> <span class="token keyword">implements</span> <span class="token class-name">MetaObjectHandler</span> <span class="token punctuation">{</span>
<span class="token comment">//    插入时的填充策略</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        根据字段名设置值</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token comment">// 更新时的填充策略</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>测试</p></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//    插入测试</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">&quot;123456@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//自动生成id</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//受影响的行数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//id会自动回填</span>
    <span class="token punctuation">}</span>
<span class="token comment">//    测试更新操作</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1376903003155496964L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        注意：updateById（）传入的参数是一个对象</span>
        userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="_3-3-乐观锁"><a href="#_3-3-乐观锁" class="header-anchor">#</a> 3.3 乐观锁</h2> <p>官方地址：https://mp.baomidou.com/guide/interceptor-optimistic-locker.html#optimisticlockerinnerinterceptor</p> <p>乐观锁和悲观锁其实非常简单！</p> <p>乐观锁：顾名思义十分乐观，它总是认为不会出现问题，无论干什么都不去上锁。如果出现了问题，再次更新值测试。</p> <p>悲观锁：顾名思义十分悲观，它总是认为会出现问题，无论干什么都去上锁，再去操作。</p> <h3 id="乐观锁实现方式"><a href="#乐观锁实现方式" class="header-anchor">#</a> 乐观锁实现方式</h3> <p>现在表中添加数据库字段version，实体类中添加对应的成员变量，并加注解@Version，版本号就是为了避免aba问题</p> <ul><li>取出记录时，获取当前version</li> <li>更新时，带上这个version</li> <li>执行更新时， set version = newVersion where version = oldVersion</li> <li>如果version不对，就更新失败</li></ul> <h4 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span> <span class="token comment">//开启事务管理</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisPlusConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//新版的mybatisplus推荐使用这种方式注册乐观锁插件，而且也可以在该方法中注册分页插件</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MybatisPlusInterceptor</span> mybatisPlusInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//    注册乐观锁插件</span>
        mybatisPlusInterceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OptimisticLockerInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mybatisPlusInterceptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//    测试乐观锁</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOptimisticLocker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ssss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210331224559670.9fbf599f.png" alt="image-20210331224559670"></p> <p>分析：当获取user时，查询获取当前version，记为oldVersion，当执行更新操作时，也将对verison值进行更新，int类型默认newVersion =oldVersion + 1，能够看到sql语句条件为<code>update user set name = ... , version = newVersion where id = ? and version = oldVersion</code>，当多线程执行时，如果version值不匹配，则更新失败！</p> <h2 id="_3-4-查询操作"><a href="#_3-4-查询操作" class="header-anchor">#</a> 3.4 查询操作</h2> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        根据id查询单个user对象</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;==============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        批量查询</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectBatchIds</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;==============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        map查询</span>
        <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        注意：map查询用and连接，例如：where name = ？ and age = ?</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userMapper<span class="token punctuation">.</span><span class="token function">selectByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-5-分页查询"><a href="#_3-5-分页查询" class="header-anchor">#</a> 3.5 分页查询</h2> <p>官方地址：https://mp.baomidou.com/guide/page.html</p> <p>配置：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span> <span class="token comment">//开启事务管理</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisPlusConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//新版的mybatisplus推荐使用这种方式注册乐观锁插件，而且也可以在该方法中注册分页插件</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MybatisPlusInterceptor</span> mybatisPlusInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//    注册乐观锁插件</span>
        mybatisPlusInterceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OptimisticLockerInnerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 注册分页插件，注意数据库类型为DbType.MYSQL</span>
        mybatisPlusInterceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span>MYSQL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mybatisPlusInterceptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>测试：</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//第一个参数：当前页数；第二个参数：页面大小</span>
        <span class="token class-name">Page</span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//第一个参数：page对象；第二个参数：条件查询器wrapper</span>
        userMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span> records <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> <span class="token keyword">record</span> <span class="token operator">:</span> records<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">record</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210331232624225.b5920758.png" alt="image-20210331232624225"></p> <h2 id="_3-6-删除操作"><a href="#_3-6-删除操作" class="header-anchor">#</a> 3.6 删除操作</h2> <p>删除操作与查询操作类似，不再测试。</p> <h2 id="_3-7-逻辑删除"><a href="#_3-7-逻辑删除" class="header-anchor">#</a> 3.7 逻辑删除</h2> <p>官方地址：https://mp.baomidou.com/guide/logic-delete.html</p> <blockquote><p>物理删除：从数据库中直接删除</p> <p>逻辑删除：在数据库中没有被删除，而是通过一个变量让它失效！例如：deleted = 0 变为 deleted = 1，在实际应用中，管理员可以查看被删除的记录！防止数据丢失，类似于回收站。</p> <p><strong>说明:</strong></p> <p>只对自动注入的sql起效:</p> <ul><li>插入: 不作限制</li> <li>查找: 追加where条件过滤掉已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li> <li>更新: 追加where条件防止更新到已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li> <li>删除: 转变为 更新</li></ul> <p>例如:</p> <ul><li>删除: <code>update user set deleted=1 where id = 1 and deleted=0</code></li> <li>查找: <code>select id,name,deleted from user where deleted=0</code></li></ul> <p>字段类型支持说明:</p> <ul><li>支持所有数据类型(推荐使用 <code>Integer</code>,<code>Boolean</code>,<code>LocalDateTime</code>)</li> <li>如果数据库字段使用<code>datetime</code>,逻辑未删除值和已删除值支持配置为字符串<code>null</code>,另一个值支持配置为函数来获取值如<code>now()</code></li></ul> <p>附录:</p> <ul><li>逻辑删除是为了方便数据恢复和保护数据本身价值等等的一种方案，但实际就是删除。</li> <li>如果你需要频繁查出来看就不应使用逻辑删除，而是以一个状态去表示。</li></ul></blockquote> <h3 id="使用方法"><a href="#使用方法" class="header-anchor">#</a> 使用方法</h3> <h4 id="步骤1-配置com-baomidou-mybatisplus-core-config-globalconfig-dbconfig"><a href="#步骤1-配置com-baomidou-mybatisplus-core-config-globalconfig-dbconfig" class="header-anchor">#</a> 步骤1: 配置<code>com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig</code></h4> <ul><li>例: application.yml</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">logic-delete-field</span><span class="token punctuation">:</span> flag  <span class="token comment"># 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span>
      <span class="token key atrule">logic-delete-value</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token comment"># 逻辑已删除值(默认为 1)</span>
      <span class="token key atrule">logic-not-delete-value</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># 逻辑未删除值(默认为 0)</span>
</code></pre></div><h4 id="步骤2-实体类字段上加上-tablelogic注解-表中添加字段deleted-默认值为0"><a href="#步骤2-实体类字段上加上-tablelogic注解-表中添加字段deleted-默认值为0" class="header-anchor">#</a> 步骤2: 实体类字段上加上<code>@TableLogic</code>注解，表中添加字段deleted，默认值为0</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@TableLogic</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span>
</code></pre></div><h4 id="测试-2"><a href="#测试-2" class="header-anchor">#</a> 测试</h4> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLogicDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210331234417260.d11f6a80.png" alt="image-20210331234417260"></p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2EAAAAnCAYAAACG5UDTAAAPV0lEQVR4nO3dTWjcVgIH8L+2hRxzaY6lbDITE8eFPQRay9CwpCzRpHQHFpyc4kCppjQQj3frQiDJITHkYKg1OZSMSiDJqTEUJmUzKqGhbCHjBHpYiOPiSM4SesylOeZQ3h5GmpE0+hxrZuTx/wcGeyQ9ve/Rk56eJSGEgG1rawsHDhxo/2FpkIurmDVbqBbQy6hAunIIZquKoM1Ebp66tYuNYz4MPU2evslARWqgLOpQhhcDGpKtrS38sfft4Zzs+TWcfO87KI//gzP7h3PKLLzx6red3afEXWtQrIH2waO61mO9SCy2/BOX4ZC+T0c4fsjbNdifRh0BIiIiIiKi3SR8EFaooiV4B4KIcoZ9Ew3C/nO483JnPQUbDQuaLKFiZHQ82/OYYL3YPbZb1uTgkzAiIiIiIqIhCh+EWRpkqYLuQNdARZIgOT8lfRjxo7FkoCLJ0LRKpz7JmtXdbGmQXXWte7fFPs7obq8YaM8vDgrHV2e923IiNK2AN/52fskarMDteUpfWLxSll9Y3vT0TTT+LNxU9uDk9W79eHH9KCaUa3gBAPgBl/btwYT9092vfdylB/Z2e/8X14929p3Y9zl+BtrvhDm/B4Q50bPtKG5e/zzgnKMW1P6cO9f2tk4/EtGHBLY/AxWpiIU1QC8lDKcnbr7jPe15DPv4YfP3j56/ffUg9nsn4FqP9WIHiLteT1Mu/v36KWuOH8IkfBJmoCKVgKaAEO2fpjrYiNG4W8PCr+V2fTJXgIXTaLdZC9oycNuuZ6KpQi+5L7jXsHDF3t5U251Awx3OsqvTvoJDplNnTcyuFnP2+Dwqrf42dxtYdXdceU1fXLySll9cPaDdpYAzX3yC/95t2oMuCz/dfYSTX5zDO/gBl/Zdxf7Hr7H58jU2Xz6FcvcwLj3oHn3n1Pf48OVrbBrn8M7za/jy4mF889LZ/2t80HO+H3Bp39+xeeWpvc9rbH4LfOoZiD3CVfPj9rbHy8DFT3Dz+cAzIka733iyYna+q1uu+Vx6qYGyEBCtKgqRbTWs/SmoCxMr04DaTBKOX9DxfuPUx+dTpx7Efu/4r/VYL/IvrgyT5k/YfmnLmuOHKG8m2stoQJ9egelaLkUpq8CTAcWKdoFprCzaFarwEWanV+3PC6jWq7A0GdLCmv2Z6j3utt1BK2WoeIJDnXAm8C5WsWkBitmAjjWgKGHBffSmBSh5mWQekdaeNldA9aKKhSvobs9j+iLjBSQuv0JcPaBd59jHOHnqKn56fg5n0ITxyyc4ewzAg+9xB4+A9/bgqmv3v5gWcKz9+8lvXQOt/QcxgUV8uu8pzoethPjge9w5soz7n7na0rF/4vyRw/jxwdf44BgAvI/zZ4/bYZagHPku4wT3wek3Ql6kUZuuVc9i+pDE7S/zvmic+vh88tQDZREr00U0jDoUxF3rsV7kXtz1eux3dMr94vaNrVO7G98Jo3yxpzqcxu3OHa7pfsOaXoEpundf/HeFR267ac1r+rKIV5b1gMbEcXx4+hGM+xZe3P8OuPLP7sDqyDLud55stX/ufBZW547j8svX2Hx5Azi7BxP7jqZ4gvU+9v952wnJj7C2mrb9jaovymsfOK5YL8ZD0vxJk4/M874kG4QpZahrC1juTjKGdoVzOmkAzF+xNr2C23bjtf69irWYQwL11FnAqORsOltUWuPaXF7Tl1W8sqoHNFY+OLsM3P0KN+4Cyt/sL/hjH+PkL4u44Zp++PO/3NMGfZ5fw80HAFDAGeMpzh95hOf/8+1jh/ml+z2vB1/hKv6Bv+Z59cSe9mdAC3vfI6qtpml/o+qL8toH5sITbNrFHlR2eqObS5Z2GgtrKsoK4r93WC/yL6trhzT5GLUvxw+REj4JU1B35uBKEiTpNDDLqUE0AMoiVrCAov0C5+lf3+3zCYiCurmCJ6Xuy6CNcs7+oW9kWv3x97e5vKYvo3hlVg9orOwvQcEN3Jk875pGeByXHy9j81R3EY0fS0HveTlhnMP+prPvYVydvIvLx/w7Hcfll3cxcfFwd2GOU8A3xjm8M6i0ZcLf/hqYCL0bHdFWI9tfAR/NTrteyk/b5v3HZ5XWvPSBI1ao4vYKsFAM7ztVNDp5Vlx4F83OP+eNudZjvdgB4q7Xk+ZP1H5pyprjhyiSEEI4f+TtP0nT+GDdattWPozwv8xHYdnSoGxtbeGPvW+POhq59sar39j+drnkfbAFTS7i14sC9d0zKhl7/A5OLm95xXfCiHLJgib7/kVEScf07Ee5GoARERERUXochBHlUgHV24dwpfO/NdrLTvNFVyLaGXz/Gyjwf1LR7sN6QeRItkQ9EQ1foYqWqI46FkREfVBQFwL1UUeDXAqotkT8bgPFekHk4JMwIiIiIiKiIeIgjIiIiIiIaIgky7JG/WyaiIiIiIhooPK0OiKXqKehePXqFfbu3TvqaIzcOObDOKaJ8oF1Kx7ziFgHdjeWf3J5yytORyQiIiIiIhoiDsKIiIiIiIiGiIMwIiIiIiKiIeIgjIiIiIiIaIg4CCOiXcRCbUZCxRh1NGqYkWZQs0K2GxVIMzWEbSYiIqKdjYMwyoiBiiRhJvSqkvItpPysGmYkCZL9M9rBS0wd88VVYn2kHa9d59v1uYJEzc+ouNqAf6DvDs+3LfK47rHJ2lTEeVKnKW7/9PHy72vVZjz9hhTa0UXEJTb/Euzn6cMiwohNJutAcDAR6UtafrHnTBKXDOoRhdhZ16IchNE2tZ8sSFIDUEcdF0ovqvwMVIpVTDUFhBAQTRV6Ke4LM4snTf4w4uuYVZuBVNzABWHH1f65sFFMfvE6TIV5PBQPMV8YdUQovyzUZhoo23W5qeooxTYsA5WlSZhOG2hOoVp06r+F2kwJ65oZsC3uuDR9fNR50qYpav808Yre19xoQXbiKwREXUkZl6j8c4vaz9/fTqE618/TcNaB9PmStPxcsaotQe+JZ5K4ZFGPqNcOvRYVLpZlCaJ+NVUIWTMDt/3+++9Djk0+5TkfesuvKVSooun5Wxb+IvamyRSaDKE2xTaEhxFYx5qqgKwJ0/kdEIAqVLUdhqnJAp3AsojfELjTtIvlub0MXUidiM4jV5s1NSF72nNUWwhu61F9fDfYFOdJW89D9k8Ur4h9m2offUJk3IPzL3K/nvBMoclJwmAdSBwv7xERZRRTfqYmZFkTWsg5U8Ulg3rEftJrJ12L8kkYjYR3+kf3Tk9Wn1MWFCxq61hyHusbDejqhYinNwYqUhHVFqCXJNc7Te6pF95pAr3lFxZGOKOhQ70wj4JVw0wJaAoBIcqALmOyCBTmL0DVG7664Y2T50Zs5BRM73HeOmegIs2gZnSPrxjwTC/ppN2qYabnWFe4Je891sjz+sPqCTs8nG5ZZJQuGhijoUOePYFUD0+NBnRM4WABgLmBllpG9xlPAQengPVnAWXnPi6tFOdJm6a+8iCWhWfrdn8T2LaCp4RFxsWdf1Hvf8bmcwsbZvoUhZ6DdcAdUHj6IsvPQm2uiqkL8ziY9FxZ1CMaSxyE0fBZNcxVp+yLZQEh6u3OOqvPKVOtarEzMJAnixF7KqgLE5oMqE0B8XAeBRioSEuYNJ0yMjG7WmxfxAeWX1AYUQw0dBVlBbDurQLaol0HipiUnS+vIiZl71F6qTsdxDvN0kJtGbgVuM1ARXJNsRECogmUPAOWFqpL9vFNtX1h1yi39zU1oLoc8j5DCXCmIQmBptq7Pfq8SfSG83C+MMB00ba5bgg0yk55pTi2pENttvtF69l6X8eljnLcedKmaTt5kEgB8w+7bc/U1lEKu/mTJC5J88+/X3EScquK5c7MtGVUW9tMGutAeHhh6YtJu1EpYnXWROCM1TTnz6oe0Y7GQRgNX+EgpqCj5L8zlNXnlA2rhrkqoHUGUE1MVYvp3vcyGtDRQrXo3GVuP+Vaf2YNpPymOrcMTWx0LmDcv7d5vtiURWiyjoYBAAXM1+cB5wmd+4mU0YAua7jl/sL0HAsAMrRb9sBRKUOFDG3RPlPhIKawjp6bwXa4i65vWqWs9myPPm8CQeEMMl20fYV5PLQHB+VGsifDgPOO5CpmTdG5WCwcnOrruGi9iy/Enic0TSELOfSZB/0qzF+A2lrFPQu9727GxCUw/wLe/wzdz7nBIUmQliahqe2n+f1gHUifvtjyMyoorQf0oXGyqEc0ljgIoxFQUBcCQtwC5tydbVafUxase6toeaYfKiirIVNXosha90VjzxOYLMqviEm5OwDQ7VGDVWtg3Xn6ZTSge6bGRLDvUM7hVucpjxx7UP8XStsz6POOKl0URKk3u4ODCEZFQnHjAkTQwi/rz1wXe+1peM6Ni8jjwmNlt2HhPS7iPOFpCgkrdP/R8sclaf5F7qfUu/3kw4PY0PubisY6ECwqffFpt1Bb0oFWFUV7oFjS7Zki2xgU9luPaDxwEEbDZ9VQc546PDShyfa896w+p0wUTsxC1pdcAyMDDT34izSUUobqnmIDwKjY09wyKb8CTswC1WUDhflb0NZLkCQJc1jErdl1lOw7yqbvdqLueoRk1eZQbbWnNMLcQMv1VMi6t4rOQzQ7LXPukaKxjCpmcWI7X5Y9eWR/2ac6b3cg6omz+12EnvMYqNWswaWLtseqYabirqdL0OWYMrFqWNJVNINunyuL0OCb7gb7CWzUcWnFnCdVmvrJg9QsWO6qXyl1z+FuP1Fxico/XxhJ89molLDemV6dJjmsA2HhRJVRfPl5p60608ZlzYyfNp9FPaLx5F6lg6sj0nakWZGmqcJexQ6uleuy+zyv8rYyj1voyoPo5nFQFvvTZGpye39nxSdTE3JIGGHl1xNGVBydcBKtsGWv0qW609W7ipezTVZV3ypfTaG60oLI1SMj/vavHubJZ1lomn/FrKjzuvLLH2dTE7I7Dp6yGEC6Mpbn9jIM7nL1l7nDk0e+9trT5sLKP+64zm4JV30LrWfJ0pQ2D7a3OqK3zXvana/9hMYlKv/cYUTms6/vSdGgWAcSxCsqfUnLL+E5ez7Poh5F2O39pN9OWh1REkIIZ0C2tbWFAwcOhA7YiPr16tUr7N27d9TRGLlxzIfcpMmo9K4qKGswYxf3oLzKTd3KMeYRsQ7sbiz/5PKWV2+OOgJERJlQ6hCiPupYEBEREcXiO2FERERERERDxEEYERERERHREHEQRkRERERENEQchBEREREREQ2RZFmWcH/w1ltvjSouREREREREA5Gn1RH/D1UvAs6YKo+BAAAAAElFTkSuQmCC" alt="image-20210331234503438"></p> <p><strong>注意：实际执行的update操作，设置deleted为1，并且在查询时会查询where deleted = 0</strong></p> <h2 id="_3-8-条件构造器-wrapper"><a href="#_3-8-条件构造器-wrapper" class="header-anchor">#</a> 3.8 条件构造器（Wrapper）</h2> <p>十分重要！</p> <p>我们写一些复杂的sql语句时就可以用它来替代。</p> <h3 id="测试1"><a href="#测试1" class="header-anchor">#</a> 测试1：</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper
                <span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">orderByAsc</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/assets/img/image-20210401220940228.a60d7a50.png" alt="image-20210401220940228"></p> <p>当执行查询操作时，要使用QueryWrapper，而且可以使用链式编程。sql语句的条件使用<code>AND</code>连接</p> <p>官方地址：https://mp.baomidou.com/guide/wrapper.html</p> <h1 id="_4-代码自动生成器"><a href="#_4-代码自动生成器" class="header-anchor">#</a> 4. 代码自动生成器</h1> <p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。</p> <h2 id="配置-2"><a href="#配置-2" class="header-anchor">#</a> 配置</h2> <h3 id="导入依赖"><a href="#导入依赖" class="header-anchor">#</a> 导入依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>        <span class="token comment">&lt;!--mybatis-plus 导入plus后不需要再导入mybatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.velocity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>velocity-engine-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="代码自动生成器类"><a href="#代码自动生成器类" class="header-anchor">#</a> 代码自动生成器类</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>yy<span class="token punctuation">.</span>mybatis_plus</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DbType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">FieldFill</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span></span><span class="token class-name">AutoGenerator</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">DataSourceConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">GlobalConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">PackageConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">StrategyConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span><span class="token class-name">TableFill</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>rules<span class="token punctuation">.</span></span><span class="token class-name">DateType</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>config<span class="token punctuation">.</span>rules<span class="token punctuation">.</span></span><span class="token class-name">NamingStrategy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAutoGenerator</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 需要构建一个 代码自动生成器 对象</span>
        <span class="token class-name">AutoGenerator</span> autoGenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 配置策略</span>
<span class="token comment">// 1、全局配置</span>
        <span class="token class-name">GlobalConfig</span> globalConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> projectPath <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.dir&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setOutputDir</span><span class="token punctuation">(</span>projectPath<span class="token operator">+</span><span class="token string">&quot;/src/main/java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setFileOverride</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否覆盖</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setServiceName</span><span class="token punctuation">(</span><span class="token string">&quot;%sService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 去Service的I前缀</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setIdType</span><span class="token punctuation">(</span><span class="token class-name">IdType</span><span class="token punctuation">.</span>ID_WORKER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setDateType</span><span class="token punctuation">(</span><span class="token class-name">DateType</span><span class="token punctuation">.</span>ONLY_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        globalConfig<span class="token punctuation">.</span><span class="token function">setSwagger2</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        autoGenerator<span class="token punctuation">.</span><span class="token function">setGlobalConfig</span><span class="token punctuation">(</span>globalConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2、设置数据源</span>
        <span class="token class-name">DataSourceConfig</span> dataSourceConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSourceConfig<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false&amp;userUnicode=true&amp;characterEncoding=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSourceConfig<span class="token punctuation">.</span><span class="token function">setDriverName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSourceConfig<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSourceConfig<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dataSourceConfig<span class="token punctuation">.</span><span class="token function">setDbType</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span>MYSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
        autoGenerator<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSourceConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3、包的配置</span>
        <span class="token class-name">PackageConfig</span> packageConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PackageConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setModuleName</span><span class="token punctuation">(</span><span class="token string">&quot;blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token string">&quot;com.yy.mybatis_plus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token string">&quot;entity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setMapper</span><span class="token punctuation">(</span><span class="token string">&quot;mapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setService</span><span class="token punctuation">(</span><span class="token string">&quot;service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setController</span><span class="token punctuation">(</span><span class="token string">&quot;controller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        autoGenerator<span class="token punctuation">.</span><span class="token function">setPackageInfo</span><span class="token punctuation">(</span>packageConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4、策略配置</span>
        <span class="token class-name">StrategyConfig</span> strategyConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrategyConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setInclude</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置要映射的表名</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setColumnNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setEntityLombokModel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自动lombok；</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setLogicDeleteFieldName</span><span class="token punctuation">(</span><span class="token string">&quot;deleted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自动填充配置</span>
        <span class="token class-name">TableFill</span> gmtCreate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TableFill</span><span class="token punctuation">(</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">,</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TableFill</span> gmtModified <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TableFill</span><span class="token punctuation">(</span><span class="token string">&quot;update_time&quot;</span><span class="token punctuation">,</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT_UPDATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TableFill</span><span class="token punctuation">&gt;</span></span> tableFills <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tableFills<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gmtCreate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tableFills<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gmtModified<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setTableFillList</span><span class="token punctuation">(</span>tableFills<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 乐观锁</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setVersionFieldName</span><span class="token punctuation">(</span><span class="token string">&quot;version&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>strategyConfig<span class="token punctuation">.</span><span class="token function">setRestControllerStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setControllerMappingHyphenStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//localhost:8080/hello_id_2</span>
        autoGenerator<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span>strategyConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
        autoGenerator<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div> <div class="footer" data-v-5d573f62><div title="share this post" class="share share-icon" data-v-5d573f62><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-share-2" data-v-5d573f62><circle cx="18" cy="5" r="3" data-v-5d573f62></circle><circle cx="6" cy="12" r="3" data-v-5d573f62></circle><circle cx="18" cy="19" r="3" data-v-5d573f62></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" data-v-5d573f62></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" data-v-5d573f62></line></svg> <path d="M896 469.333333l-298.666667-298.666667 0 170.666667C298.666667 384 170.666667 597.333333 128 810.666667c106.666667-149.333333 256-217.6 469.333333-217.6L597.333333 768 896 469.333333z" p-id="7022" fill="#1296db" data-v-5d573f62></path></div> <div class="share" data-v-5d573f62><!----></div> <div class="share" data-v-5d573f62><!----></div></div></div> <div class="footer" data-v-882df4f6 data-v-5d573f62><footer data-v-882df4f6><div data-v-882df4f6>
            © 2018 -
            2022
            <svg viewBox="64 64 896 896" data-icon="flag" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" data-v-882df4f6><path fill="#1296db" d="M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32z" data-v-882df4f6></path></svg>
            @Yuan YE
        </div> <div data-v-882df4f6>
            Based on the
            <a href="https://vuepress.vuejs.org/" target="_blank" data-v-882df4f6>VuePress Powered</a>
            &amp;
            <a href="https://github.com/korilin/vuepress-theme-twipress" target="_blank" data-v-882df4f6>Twipress Theme</a></div> <div data-v-882df4f6>
            备案号：<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/" data-v-882df4f6>
                粤ICP备19149652号
            </a></div></footer></div></div></div><div id="toolbar" data-v-fe84d7a0><!----> <div class="toolbar" data-v-fe84d7a0><div class="search" data-v-fe84d7a0><div class="search-box" data-v-fe84d7a0><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="post-sort" data-v-fe84d7a0><div class="title" data-v-fe84d7a0>Post Order</div> <div class="op" data-v-fe84d7a0>
                By Time
                <svg t="1610607067172" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2795" width="20" height="20" class="icon" style="display:;" data-v-fe84d7a0><path d="M495.765247 353.091804 333.414649 190.741205 171.065074 353.091804 304.386522 353.091804l0 420.142919c0 17.947767 14.046924 32.469506 31.978319 32.469506 17.931395 0 31.978319-14.522762 31.978319-32.469506L368.343159 353.091804 495.765247 353.091804z" p-id="2796" data-v-fe84d7a0></path> <path d="M720.104665 672.874991 720.104665 221.24494c0-17.947767-14.046924-32.469506-31.978319-32.469506s-31.978319 14.522762-31.978319 32.469506l0 451.630051-127.913275 0 162.349575 162.349575 162.349575-162.349575L720.104665 672.874991z" p-id="2797" data-spm-anchor-id="a313x.7781069.0.i7" fill="#1296db" class="selected" data-v-fe84d7a0></path></svg> <svg t="1610612746140" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2973" width="20" height="20" class="icon" style="display:none;" data-v-fe84d7a0><path d="M495.765247 353.091804 333.414649 190.741205 171.065074 353.091804 304.386522 353.091804l0 420.142919c0 17.947767 14.046924 32.469506 31.978319 32.469506 17.931395 0 31.978319-14.522762 31.978319-32.469506L368.343159 353.091804 495.765247 353.091804z" p-id="2974" data-spm-anchor-id="a313x.7781069.0.i9" fill="#1296db" class="selected" data-v-fe84d7a0></path> <path d="M720.104665 672.874991 720.104665 221.24494c0-17.947767-14.046924-32.469506-31.978319-32.469506s-31.978319 14.522762-31.978319 32.469506l0 451.630051-127.913275 0 162.349575 162.349575 162.349575-162.349575L720.104665 672.874991z" p-id="2975" data-v-fe84d7a0></path></svg>
                :
                <span class="content" data-v-fe84d7a0>DESC</span></div></div> <div class="statistics" data-v-fe84d7a0><div class="title" data-v-fe84d7a0>Article Statistics</div> <div class="data" data-v-fe84d7a0>
                Article: 27
            </div> <div class="data" data-v-fe84d7a0>
                Categories: 5
            </div> <div class="data" data-v-fe84d7a0>
                Tags: 18
            </div> <div class="more" data-v-fe84d7a0><a href="/blog/archive" data-v-fe84d7a0>see more</a></div></div></div></div></span></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3aaa0c49.js" defer></script><script src="/blog/assets/js/4.bf1654a3.js" defer></script>
  </body>
</html>
