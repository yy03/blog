<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux操作系统安装常用软件 | YuanYE</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="Kori Lin BLOG">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" conetent="KORILIN">
    <meta name="twitter:creator" conetent="@Kori_Lin">
    
    <link rel="preload" href="/blog/assets/css/1.styles.1f37ec6d.css" as="style"><link rel="preload" href="/blog/assets/js/app.3aaa0c49.js" as="script"><link rel="preload" href="/blog/assets/js/26.2173183c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.73419e87.js"><link rel="prefetch" href="/blog/assets/js/11.05829631.js"><link rel="prefetch" href="/blog/assets/js/12.7e8086c5.js"><link rel="prefetch" href="/blog/assets/js/13.f1400667.js"><link rel="prefetch" href="/blog/assets/js/14.c6dd0951.js"><link rel="prefetch" href="/blog/assets/js/15.0f37c6f6.js"><link rel="prefetch" href="/blog/assets/js/16.a4662ec0.js"><link rel="prefetch" href="/blog/assets/js/17.e8372a64.js"><link rel="prefetch" href="/blog/assets/js/18.37715e79.js"><link rel="prefetch" href="/blog/assets/js/19.e397b51f.js"><link rel="prefetch" href="/blog/assets/js/2.1e961ff5.js"><link rel="prefetch" href="/blog/assets/js/20.19f61b49.js"><link rel="prefetch" href="/blog/assets/js/21.3b043514.js"><link rel="prefetch" href="/blog/assets/js/22.60b4227d.js"><link rel="prefetch" href="/blog/assets/js/23.0dbcd6f8.js"><link rel="prefetch" href="/blog/assets/js/24.b5bb6a2c.js"><link rel="prefetch" href="/blog/assets/js/25.f36cd997.js"><link rel="prefetch" href="/blog/assets/js/27.7e05cc7c.js"><link rel="prefetch" href="/blog/assets/js/28.bcba955e.js"><link rel="prefetch" href="/blog/assets/js/29.f0b4c45b.js"><link rel="prefetch" href="/blog/assets/js/3.58551e39.js"><link rel="prefetch" href="/blog/assets/js/30.04c3ed65.js"><link rel="prefetch" href="/blog/assets/js/4.bf1654a3.js"><link rel="prefetch" href="/blog/assets/js/5.cb45b255.js"><link rel="prefetch" href="/blog/assets/js/6.aa9fd703.js"><link rel="prefetch" href="/blog/assets/js/7.a807b0d2.js"><link rel="prefetch" href="/blog/assets/js/8.29c46423.js"><link rel="prefetch" href="/blog/assets/js/9.58f55c6f.js">
    <link rel="stylesheet" href="/blog/assets/css/1.styles.1f37ec6d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><span><div id="sidebar" data-v-6e67c360><div class="PC-sidebar" data-v-6e67c360><div class="title" data-v-6e67c360>
            @<span data-v-6e67c360>YuanYE</span></div> <a href="/blog/" class="router-link-active bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home" data-v-7201a518><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-v-7201a518></path> <polyline points="9 22 9 12 15 12 15 22" data-v-7201a518></polyline></svg> <!----> <!----></div> <div class="name" data-v-7201a518>Home</div></a> <a href="/blog/archive" class="bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><!----> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-book" data-v-7201a518><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" data-v-7201a518></path> <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" data-v-7201a518></path></svg> <!----></div> <div class="name" data-v-7201a518>Archive</div></a> <a href="/blog/about/" class="bar-button" data-v-7201a518 data-v-6e67c360><div class="svg" data-v-7201a518><!----> <!----> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user" data-v-7201a518><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" data-v-7201a518></path> <circle cx="12" cy="7" r="4" data-v-7201a518></circle></svg></div> <div class="name" data-v-7201a518>About</div></a></div> <!----></div><div class="main"><div class="wrap" data-v-5d573f62><div class="post" data-v-5d573f62><div class="title" data-v-5d573f62><h1 data-v-5d573f62>Linux操作系统安装常用软件</h1></div> <div class="info" data-v-5d573f62><div class="date" data-v-382026d3 data-v-5d573f62><div class="svg" data-v-382026d3><svg t="1610177893433" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5858" width="16" height="16" class="icon" data-v-382026d3><path d="M512 192c179.2 0 320 140.8 320 320s-140.8 320-320 320-320-140.8-320-320S332.8 192 512 192M512 128C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128L512 128z" p-id="5859" fill="#707070" data-v-382026d3></path> <path d="M640 672c-6.4 0-19.2 0-25.6-6.4l-128-128C486.4 531.2 480 518.4 480 512L480 288C480 268.8 492.8 256 512 256s32 12.8 32 32l0 211.2 121.6 121.6c12.8 12.8 12.8 32 0 44.8C659.2 672 646.4 672 640 672z" p-id="5860" fill="#707070" data-v-382026d3></path></svg></div> <div class="content" data-v-382026d3>2021-11-22</div></div> <div class="category" data-v-a6fce850 data-v-5d573f62><div class="svg" data-v-a6fce850><svg t="1610177808699" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4460" width="16" height="16" class="icon" data-v-a6fce850><path d="M725.290667 725.290667m-213.333334 0a213.333333 213.333333 0 1 0 426.666667 0 213.333333 213.333333 0 1 0-426.666667 0Z" p-id="4461" fill="#707070" data-v-a6fce850></path> <path d="M789.205333 234.794667m-149.333333 0a149.333333 149.333333 0 1 0 298.666667 0 149.333333 149.333333 0 1 0-298.666667 0Z" p-id="4462" fill="#707070" data-v-a6fce850></path> <path d="M235.861333 788.138667m-149.333333 0a149.333333 149.333333 0 1 0 298.666667 0 149.333333 149.333333 0 1 0-298.666667 0Z" p-id="4463" fill="#707070" data-v-a6fce850></path> <path d="M298.709333 298.709333m-213.333333 0a213.333333 213.333333 0 1 0 426.666667 0 213.333333 213.333333 0 1 0-426.666667 0Z" p-id="4464" fill="#707070" data-v-a6fce850></path></svg></div> <div class="content" data-v-a6fce850>笔记</div></div> <div class="tags" data-v-2ed44237 data-v-5d573f62><div class="svg" data-v-2ed44237><svg t="1610177743508" viewBox="0 0 1085 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2934" width="16" height="16" class="icon" data-v-2ed44237><path d="M256 256q0-30.285714-21.428571-51.714286T182.857143 182.857143t-51.714286 21.428571T109.714286 256t21.428571 51.714286T182.857143 329.142857t51.714286-21.428571T256 256z m609.714286 329.142857q0 30.285714-21.142857 51.428572l-280.571429 281.142857q-22.285714 21.142857-52 21.142857-30.285714 0-51.428571-21.142857L52 508.571429q-21.714286-21.142857-36.857143-57.714286T0 384V146.285714q0-29.714286 21.714286-51.428571t51.428571-21.714286h237.714286q30.285714 0 66.857143 15.142857T436 125.142857l408.571429 408q21.142857 22.285714 21.142857 52z m219.428571 0q0 30.285714-21.142857 51.428572l-280.571429 281.142857q-22.285714 21.142857-52 21.142857-20.571429 0-33.714285-8t-30.285715-25.714286l268.571429-268.571428q21.142857-21.142857 21.142857-51.428572 0-29.714286-21.142857-52L527.428571 125.142857q-21.714286-21.714286-58.285714-36.857143T402.285714 73.142857h128q30.285714 0 66.857143 15.142857t58.285714 36.857143l408.571429 408q21.142857 22.285714 21.142857 52z" p-id="2935" fill="#8a8a8a" data-v-2ed44237></path></svg></div> <div class="content" data-v-2ed44237><span class="tag" style="color:#5EA2DD;" data-v-2ed44237>
            Linux
        </span></div></div></div> <div class="line" data-v-5d573f62></div> <div class="content" data-v-5d573f62><div class="content__default" data-v-5d573f62><h2 id="centos7下安装常用软件详细过程"><a href="#centos7下安装常用软件详细过程" class="header-anchor">#</a> Centos7下安装常用软件详细过程</h2> <h3 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h3> <p><strong>本次在Centos7下安装的软件包括：JDK1.8、MySQL-5.7.17、Redis-6.0.9、Elasticsearch-7.6.0、kibana-7.6.0、nginx-1.18.0、Rocketmq-4.7.1</strong></p> <p><strong>开启本次安装软件要开放的端口</strong></p> <div class="language-she extra-class"><pre class="language-text"><code># mysql 3306
firewall-cmd --zone=public --add-port=3306/tcp --permanent

# redis 6379
firewall-cmd --zone=public --add-port=6379/tcp --permanent

# elasticsaerch 对外访问 9200
firewall-cmd --zone=public --add-port=9200/tcp --permanent

# elasticsaerch 集群通信 9300
firewall-cmd --zone=public --add-port=9300/tcp --permanent

# kibana 5601
firewall-cmd --zone=public --add-port=5601/tcp --permanent

# nginx 默认的80
firewall-cmd --zone=public --add-port=80/tcp --permanent

# rocketmq nameserver 9876
firewall-cmd --zone=public --add-port=9876/tcp --permanent

# rocketmq broker 10911
firewall-cmd --zone=public --add-port=10911/tcp --permanent

# 重启防火墙
systemctl restart firewalld
</code></pre></div><p><strong>本次安装基于tar包安装，若本机装有Docker需要将docker0虚拟网卡删除掉，并且将docker开机自启关闭，否则安装Rocketmq时会报错</strong></p> <div class="language-shel extra-class"><pre class="language-text"><code>systemctl stop docker

ip link set dev docker0 down

brctl delbr docker0

systemctl disable docker
</code></pre></div><h3 id="jdk1-8安装"><a href="#jdk1-8安装" class="header-anchor">#</a> JDK1.8安装</h3> <p><strong>tar包放在了/home/admin/目录下</strong></p> <h4 id="卸载系统自带的openjdk以及相关的java文件"><a href="#卸载系统自带的openjdk以及相关的java文件" class="header-anchor">#</a> <strong>卸载系统自带的OpenJDK以及相关的java文件</strong></h4> <div class="language-shel extra-class"><pre class="language-text"><code>[root@localhost /]# rpm -qa | grep java
tzdata-java-2017b-1.el7.noarch
python-javapackages-3.4.1-11.el7.noarch
java-1.8.0-openjdk-1.8.0.131-11.b12.el7.x86_64
java-1.8.0-openjdk-headless-1.8.0.131-11.b12.el7.x86_64
javapackages-tools-3.4.1-11.el7.noarch
[root@localhost /]# rpm -e --nodeps tzdata-java-2017b-1.el7.noarch
[root@localhost /]# rpm -e --nodeps python-javapackages-3.4.1-11.el7.noarch
[root@localhost /]# rpm -e --nodeps java-1.8.0-openjdk-1.8.0.131-11.b12.el7.x86_64
[root@localhost /]# rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.131-11.b12.el7.x86_64
[root@localhost /]# rpm -e --nodeps javapackages-tools-3.4.1-11.el7.noarch
</code></pre></div><h4 id="解压安装包并配置环境变量"><a href="#解压安装包并配置环境变量" class="header-anchor">#</a> 解压安装包并配置环境变量</h4> <div class="language-shel extra-class"><pre class="language-text"><code>[root@localhost admin]# tar -zxvf jdk1.8.0_271.tar.gz
[root@localhost admin]# mv jdk1.8.0_271 /usr/local/jdk
[root@localhost admin]# vim /etc/profile
</code></pre></div><div class="language-shel extra-class"><pre class="language-text"><code>#配置环境变量
export JAVA_HOME=/usr/local/jdk
export CLASSPATH=$:CLASSPATH:$JAVA_HOME/lib/
export PATH=$PATH:$JAVA_HOME/bin

# 让配置生效
source /etc/profile
</code></pre></div><h3 id="mysql-5-7-17安装"><a href="#mysql-5-7-17安装" class="header-anchor">#</a> MySQL-5.7.17安装</h3> <h4 id="卸载centos7系统自带mariadb并添加mysql的用户组和用户"><a href="#卸载centos7系统自带mariadb并添加mysql的用户组和用户" class="header-anchor">#</a> 卸载CentOS7系统自带mariadb并添加mysql的用户组和用户</h4> <div class="language-she extra-class"><pre class="language-text"><code>[root@localhost admin]# rpm -qa|grep mariadb
mariadb-libs-5.5.56-2.el7.x86_64
[root@localhost admin]# rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64
# 删除etc目录下的my.cnf ，一定要删掉，等下再重新建，之前我将就用这个文件，后面改配置各种不生效
[root@localhost admin]# rm /etc/my.cnf
[root@localhost admin]# groupadd mysql
[root@localhost admin]# useradd -r -g mysql mysql
[root@localhost admin]# tar -zxvf mysql-5.7.17-linux-glibc2.5-x86_64.tar.gz
[root@localhost admin]# mv mysql-5.7.17-linux-glibc2.5-x86_64 /usr/local/mysql
[root@localhost admin]# cd /usr/local/
[root@localhost local]# chown -R mysql:mysql mysql/
[root@localhost local]# chmod -R 775 mysql/
</code></pre></div><h4 id="进入mysql-bin-目录-编译安装并初始化mysql-务必记住数据库管理员临时密码"><a href="#进入mysql-bin-目录-编译安装并初始化mysql-务必记住数据库管理员临时密码" class="header-anchor">#</a> 进入mysql/bin/目录，编译安装并初始化mysql,务必记住数据库管理员临时密码</h4> <div class="language-shel extra-class"><pre class="language-text"><code>[root@localhost bin]# ./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql
</code></pre></div><h4 id="编写配置文件-my-cnf-并添加配置"><a href="#编写配置文件-my-cnf-并添加配置" class="header-anchor">#</a> 编写配置文件 my.cnf ，并添加配置</h4> <div class="language-shel extra-class"><pre class="language-text"><code># 进入配置文件
vi /etc/my.cnf

# 在插入模式下编写，完成后保存，当然这个可以自己添加，

[mysqld]
datadir=/usr/local/mysql/data
port = 3306
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
symbolic-links=0
max_connections=400
innodb_file_per_table=1
#表名大小写不明感，敏感为
lower_case_table_names=1
</code></pre></div><h4 id="添加软连接-并启动mysql-服务"><a href="#添加软连接-并启动mysql-服务" class="header-anchor">#</a> 添加软连接，并启动mysql 服务</h4> <div class="language-shel extra-class"><pre class="language-text"><code>[root@localhost bin]# clear
[root@localhost bin]# ln -s /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql
[root@localhost bin]# ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql
[root@localhost bin]# service mysql start
Starting MySQL.Logging to '/usr/local/mysql/data/localhost.err'.
 SUCCESS!
</code></pre></div><h4 id="启动mysql修改密码并开放远程链接"><a href="#启动mysql修改密码并开放远程链接" class="header-anchor">#</a> 启动MySQL修改密码并开放远程链接</h4> <div class="language-shel extra-class"><pre class="language-text"><code>mysql -uroot -p

set password for root@localhost = password('123456');
use mysql;
update user set user.Host='%' where user.User='root';
flush privileges;
</code></pre></div><h4 id="设置开机自启"><a href="#设置开机自启" class="header-anchor">#</a> 设置开机自启</h4> <div class="language-shel extra-class"><pre class="language-text"><code>//将服务文件拷贝到init.d下，并重命名为mysql
cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
//赋予可执行权限
chmod +x /etc/init.d/mysqld
//添加服务
chkconfig --add mysqld
//显示服务列表
chkconfig --list
</code></pre></div><h3 id="redis-6-0-9安装"><a href="#redis-6-0-9安装" class="header-anchor">#</a> Redis-6.0.9安装</h3> <h4 id="安装redis6-0-9要求gcc版本不能太低-先升级gcc版本"><a href="#安装redis6-0-9要求gcc版本不能太低-先升级gcc版本" class="header-anchor">#</a> <strong>安装Redis6.0.9要求gcc版本不能太低，先升级gcc版本</strong></h4> <div class="language-shell extra-class"><pre class="language-shell"><code>yum -y <span class="token function">install</span> centos-release-scl

yum -y <span class="token function">install</span> devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils

scl <span class="token builtin class-name">enable</span> devtoolset-9 <span class="token function">bash</span>

<span class="token comment"># 需要注意的是scl命令启用只是临时的，退出shell或重启就会恢复原系统gcc版本。如果要长期使用gcc 9.3的话：</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;source /opt/rh/devtoolset-9/enable&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/profile
</code></pre></div><h4 id="编译安装"><a href="#编译安装" class="header-anchor">#</a> 编译安装</h4> <div class="language-shel extra-class"><pre class="language-text"><code>tar -zxvf redis-6.0.3.tar.gz

cd /usr/local/redis
make
make install PREFIX=/usr/local/redis
</code></pre></div><h4 id="修改配置"><a href="#修改配置" class="header-anchor">#</a> 修改配置</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 进入redis根目录</span>
<span class="token builtin class-name">cd</span> /usr/local/redis
<span class="token comment"># 先将当前目录下的redis.conf拷贝一份到./bin目录下</span>
<span class="token function">cp</span> redis.conf ./bin/
<span class="token function">vim</span> ./bin/redis.conf

<span class="token comment"># 主要修改下边几项</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
daemonize <span class="token function">yes</span>
</code></pre></div><h4 id="设置开机自启-2"><a href="#设置开机自启-2" class="header-anchor">#</a> 设置开机自启</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /lib/systemd/system/redis.service

<span class="token comment"># 将下边粘贴进去就行了，使用systemctl命令启动</span>
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Redis
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/var/run/redis_6379.pid
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill -s HUP <span class="token variable">$MAINPID</span>
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/bin/kill -s QUIT <span class="token variable">$MAINPID</span>
<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target

<span class="token comment"># 设置开机自启动</span>
systemctl <span class="token builtin class-name">enable</span> redis
</code></pre></div><h3 id="elasticsearch-7-6-0安装"><a href="#elasticsearch-7-6-0安装" class="header-anchor">#</a> ElasticSearch-7.6.0安装</h3> <p><strong>安装前准备</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># ES不允许以root用户启动，需要创建非root用户</span>
<span class="token function">groupadd</span> elk
<span class="token function">useradd</span> elk -g elk -p <span class="token number">123456</span>

<span class="token comment"># 7.6.0版本对file descriptors和virtual memory有要求</span>
<span class="token function">vim</span> /etc/security/limits.conf
* soft nofile <span class="token number">300000</span>
* hard nofile <span class="token number">300000</span>
* soft nproc <span class="token number">102400</span>
* soft memlock unlimited
* hard memlock unlimited

<span class="token builtin class-name">echo</span> <span class="token string">&quot;vm.max_map_count=262144&quot;</span> <span class="token operator">&gt;</span> /etc/sysctl.conf
sysctl -p
</code></pre></div><h4 id="解压安装包修改配置文件"><a href="#解压安装包修改配置文件" class="header-anchor">#</a> 解压安装包修改配置文件</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> -zxvf elasticsearch-7.6.0-linux-x86_64.tar.gz
<span class="token function">mv</span> elasticsearch-7.6.0 /usr/local/elasticsearch
<span class="token builtin class-name">cd</span> /usr/local/
<span class="token function">chown</span> -R elk:elk elasticsearch/
<span class="token builtin class-name">cd</span> elasticsearch/


<span class="token function">vim</span> /config/elasticsearch.yml

node.name: node-1
network.host: <span class="token number">0.0</span>.0.0
discovery.seed_hosts: <span class="token punctuation">[</span><span class="token string">&quot;192.168.1.104&quot;</span><span class="token punctuation">]</span>
cluster.initial_master_nodes: <span class="token punctuation">[</span><span class="token string">&quot;node-1&quot;</span><span class="token punctuation">]</span>
xpack.security.enabled: <span class="token boolean">true</span>
xpack.security.transport.ssl.enabled: <span class="token boolean">true</span>
xpack.license.self_generated.type: basic
</code></pre></div><h4 id="启动elasticsearch并配置密码"><a href="#启动elasticsearch并配置密码" class="header-anchor">#</a> 启动ElasticSearch并配置密码</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">su</span> elk

<span class="token builtin class-name">cd</span> /usr/local/elasticsearch/bin
./elasticsearch -d
./elasticsearch-setup-passwords -interactive
</code></pre></div><h4 id="设置开机自启动"><a href="#设置开机自启动" class="header-anchor">#</a> 设置开机自启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># root用户下</span>
<span class="token function">vim</span> /etc/init.d/elasticsearch
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token comment">#!/bin/bash</span>
<span class="token comment">#chkconfig: 345 63 37</span>
<span class="token comment">#description: elasticsearch</span>
<span class="token comment">#processname: elasticsearch-5.4.0</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable">ES_HOME</span><span class="token operator">=</span>/usr/local/elasticsearch

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
        start<span class="token punctuation">)</span>
                <span class="token function">su</span> elk<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
                <span class="token builtin class-name">cd</span> <span class="token variable">$ES_HOME</span>
                ./bin/elasticsearch -d -p pid
                <span class="token builtin class-name">exit</span>
<span class="token operator">!</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;elasticsearch is started&quot;</span>
                <span class="token punctuation">;</span><span class="token punctuation">;</span>
        stop<span class="token punctuation">)</span>
                <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> $ES_HOME/pid<span class="token variable">`</span></span>
                <span class="token function">kill</span> -9 <span class="token variable">$pid</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;elasticsearch is stopped&quot;</span>
                <span class="token punctuation">;</span><span class="token punctuation">;</span>
        restart<span class="token punctuation">)</span>
                <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> $ES_HOME/pid<span class="token variable">`</span></span>
                <span class="token function">kill</span> -9 <span class="token variable">$pid</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;elasticsearch is stopped&quot;</span>
                <span class="token function">sleep</span> <span class="token number">1</span>
                <span class="token function">su</span> elk<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
                <span class="token builtin class-name">cd</span> <span class="token variable">$ES_HOME</span>
                ./bin/elasticsearch -d -p pid
                <span class="token builtin class-name">exit</span>
<span class="token operator">!</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;elasticsearch is started&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;start|stop|restart&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">chmod</span> <span class="token number">777</span> /etc/init.d/elasticsearch
<span class="token function">chkconfig</span> --add elasticsearch
</code></pre></div><h3 id="kibana-7-6-0安装"><a href="#kibana-7-6-0安装" class="header-anchor">#</a> Kibana-7.6.0安装</h3> <h4 id="解压安装包"><a href="#解压安装包" class="header-anchor">#</a> 解压安装包</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">tar</span> -zxvf kibana-7.6.0-linux-x86_64.tar.gz
<span class="token function">mv</span> kibana-7.6.0-linux-x86_64 /usr/local/kibana

</code></pre></div><h4 id="修改配置文件"><a href="#修改配置文件" class="header-anchor">#</a> 修改配置文件</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /usr/local/kibana/config/kibana.yml

<span class="token comment"># 添加或修改以下配置文件 </span>
i18n.locale: <span class="token string">&quot;zh-CN&quot;</span>
server.port: <span class="token number">5601</span>
server.host: <span class="token string">&quot;0.0.0.0&quot;</span>
elasticsearch.hosts: <span class="token punctuation">[</span><span class="token string">&quot;http://192.168.3.103:9200&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># 配置elasticsearch用户名和密码</span>
elasticsearch.username: <span class="token string">&quot;elastic&quot;</span>
elasticsearch.password: <span class="token string">&quot;123456&quot;</span>
</code></pre></div><h4 id="设置开机自启动-2"><a href="#设置开机自启动-2" class="header-anchor">#</a> 设置开机自启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /etc/init.d/kibana

<span class="token comment">#!/bin/bash</span>
<span class="token comment"># chkconfig:   2345 98  02</span>
<span class="token comment"># description:  kibana</span>
<span class="token assign-left variable">KIBANA_HOME</span><span class="token operator">=</span>/usr/local/kibana
<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
        start<span class="token punctuation">)</span>
         <span class="token variable">$KIBANA_HOME</span>/bin/kibana --allow-root <span class="token operator">&amp;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;require start&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /etc/init.d
<span class="token function">chmod</span> <span class="token number">777</span> kibana
<span class="token function">chkconfig</span> --add kibana
<span class="token comment"># 2 3 4 5 或者 3 4 5 为on就行</span>
<span class="token function">chkconfig</span> --list
</code></pre></div><h3 id="rocketmq-4-7-1安装"><a href="#rocketmq-4-7-1安装" class="header-anchor">#</a> Rocketmq-4.7.1安装</h3> <h4 id="解压后配置开机自启"><a href="#解压后配置开机自启" class="header-anchor">#</a> 解压后配置开机自启</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /etc/init.d/rocketmq
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># rocketmq - this script starts and stops the rocketmq daemon</span>
<span class="token comment">#</span>
<span class="token comment"># chkconfig: - 85 15</span>

<span class="token comment"># jdk根目录</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk/jdk1.8.0_271
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>

<span class="token assign-left variable">ROCKETMQ_HOME</span><span class="token operator">=</span>/usr/local/rocketmq
<span class="token assign-left variable">ROCKETMQ_BIN</span><span class="token operator">=</span><span class="token variable">${ROCKETMQ_HOME}</span>/bin
<span class="token assign-left variable">ADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.3.104:9876
<span class="token assign-left variable">LOG_DIR</span><span class="token operator">=</span><span class="token variable">${ROCKETMQ_HOME}</span>/logs
<span class="token assign-left variable">NAMESERVER_LOG</span><span class="token operator">=</span><span class="token variable">${LOG_DIR}</span>/namesrv.log
<span class="token assign-left variable">BROKER_LOG</span><span class="token operator">=</span><span class="token variable">${LOG_DIR}</span>/broker.log

<span class="token function-name function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token variable">${LOG_DIR}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
<span class="token function">mkdir</span> <span class="token variable">${LOG_DIR}</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${ROCKETMQ_HOME}</span>
<span class="token function">nohup</span> <span class="token function">sh</span> bin/mqnamesrv <span class="token operator">&gt;</span> <span class="token variable">${NAMESERVER_LOG}</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;The Name Server boot success...&quot;</span>
<span class="token function">nohup</span> <span class="token function">sh</span> bin/mqbroker -n <span class="token variable">${ADDR}</span> <span class="token operator">&gt;</span> <span class="token variable">${BROKER_LOG}</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;The broker[%s, <span class="token variable">${ADDR}</span>] boot success...&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${ROCKETMQ_HOME}</span>
<span class="token function">sh</span> bin/mqshutdown broker
<span class="token function">sleep</span> <span class="token number">1</span>
<span class="token function">sh</span> bin/mqshutdown namesrv
<span class="token punctuation">}</span>
<span class="token function-name function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
stop
<span class="token function">sleep</span> <span class="token number">5</span>
start
<span class="token punctuation">}</span>


<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
start<span class="token punctuation">)</span>
start
<span class="token punctuation">;</span><span class="token punctuation">;</span>
stop<span class="token punctuation">)</span>
stop
<span class="token punctuation">;</span><span class="token punctuation">;</span>
restart<span class="token punctuation">)</span>
restart
<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> $<span class="token string">&quot;Usage: <span class="token variable">$0</span> {start|stop|restart}&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">2</span>
<span class="token keyword">esac</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">chmod</span> <span class="token number">777</span> /etc/init.d/rocketmq
<span class="token function">chkconfig</span> --add rocketmq
<span class="token function">chkconfig</span> rocketmq on
<span class="token function">chkconfig</span> --list
</code></pre></div><h3 id="nginx-1-18-0安装"><a href="#nginx-1-18-0安装" class="header-anchor">#</a> Nginx-1.18.0安装</h3> <h4 id="安装c环境"><a href="#安装c环境" class="header-anchor">#</a> 安装c环境</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token function">install</span> -y gcc pcre-devel zlib-devel
</code></pre></div><h4 id="解压安装包并编译"><a href="#解压安装包并编译" class="header-anchor">#</a> 解压安装包并编译</h4> <div class="language-shel extra-class"><pre class="language-text"><code># 解压到/opt/nginx目录下
tar -zxvf nginx-1.18.0.tar.gz 
mv nginx-1.18.0 /opt/nginx
cd /opt/nginx
./configure
make
make install

# 这样编译之后的默认目录是在/usr/local/nginx/目录下
</code></pre></div><h4 id="设置开机自启-3"><a href="#设置开机自启-3" class="header-anchor">#</a> 设置开机自启</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /lib/systemd/system/nginx.service
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>nginx
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target
 
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx -s reload
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/usr/local/nginx/sbin/nginx -s quit
<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true
 
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>systemctl start nginx
systemctl <span class="token builtin class-name">enable</span> nginx
</code></pre></div><h3 id="部署前端项目"><a href="#部署前端项目" class="header-anchor">#</a> 部署前端项目</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 将dist文件夹中的文件（static index.html）放在/usr/local/nginx/html/目录下</span>

<span class="token comment"># 修改nginx配置文件</span>
<span class="token builtin class-name">cd</span> /usr/local/nginx/conf
<span class="token function">vim</span> nginx.conf
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>    server <span class="token punctuation">{</span>
        listen       <span class="token number">8081</span><span class="token punctuation">;</span>
        server_name  <span class="token number">192.168</span>.3.103<span class="token punctuation">;</span>

        <span class="token comment">#charset koi8-r;</span>

        <span class="token comment">#access_log  logs/host.access.log  main;</span>

        location / <span class="token punctuation">{</span>
            try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>  <span class="token comment">#防止刷新404</span>
            root   html<span class="token punctuation">;</span>
            index  index.html index.htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment"># 配置反向代理</span>
         location /api <span class="token punctuation">{</span>
          <span class="token comment">#  rewrite  ^.+api/?(.*)$ /$1 break;  # 一般前端项目到后端为/api/*** 这样是去掉/api，看后端url请求判断是否去掉</span>
            proxy_pass  http://192.168.3.103:30002<span class="token punctuation">;</span>  <span class="token comment"># 后端项目地址</span>
         <span class="token punctuation">}</span>

        <span class="token comment">#error_page  404              /404.html;</span>

        <span class="token comment"># redirect server error pages to the static page /50x.html</span>
        <span class="token comment">#</span>
        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div></div></div> <div class="footer" data-v-5d573f62><div title="share this post" class="share share-icon" data-v-5d573f62><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-share-2" data-v-5d573f62><circle cx="18" cy="5" r="3" data-v-5d573f62></circle><circle cx="6" cy="12" r="3" data-v-5d573f62></circle><circle cx="18" cy="19" r="3" data-v-5d573f62></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49" data-v-5d573f62></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49" data-v-5d573f62></line></svg> <path d="M896 469.333333l-298.666667-298.666667 0 170.666667C298.666667 384 170.666667 597.333333 128 810.666667c106.666667-149.333333 256-217.6 469.333333-217.6L597.333333 768 896 469.333333z" p-id="7022" fill="#1296db" data-v-5d573f62></path></div> <div class="share" data-v-5d573f62><!----></div> <div class="share" data-v-5d573f62><!----></div></div></div> <div class="footer" data-v-882df4f6 data-v-5d573f62><footer data-v-882df4f6><div data-v-882df4f6>
            © 2018 -
            2022
            <svg viewBox="64 64 896 896" data-icon="flag" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" data-v-882df4f6><path fill="#1296db" d="M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32z" data-v-882df4f6></path></svg>
            @Yuan YE
        </div> <div data-v-882df4f6>
            Based on the
            <a href="https://vuepress.vuejs.org/" target="_blank" data-v-882df4f6>VuePress Powered</a>
            &amp;
            <a href="https://github.com/korilin/vuepress-theme-twipress" target="_blank" data-v-882df4f6>Twipress Theme</a></div> <div data-v-882df4f6>
            备案号：<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/" data-v-882df4f6>
                粤ICP备19149652号
            </a></div></footer></div></div></div><div id="toolbar" data-v-fe84d7a0><!----> <div class="toolbar" data-v-fe84d7a0><div class="search" data-v-fe84d7a0><div class="search-box" data-v-fe84d7a0><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="post-sort" data-v-fe84d7a0><div class="title" data-v-fe84d7a0>Post Order</div> <div class="op" data-v-fe84d7a0>
                By Time
                <svg t="1610607067172" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2795" width="20" height="20" class="icon" style="display:;" data-v-fe84d7a0><path d="M495.765247 353.091804 333.414649 190.741205 171.065074 353.091804 304.386522 353.091804l0 420.142919c0 17.947767 14.046924 32.469506 31.978319 32.469506 17.931395 0 31.978319-14.522762 31.978319-32.469506L368.343159 353.091804 495.765247 353.091804z" p-id="2796" data-v-fe84d7a0></path> <path d="M720.104665 672.874991 720.104665 221.24494c0-17.947767-14.046924-32.469506-31.978319-32.469506s-31.978319 14.522762-31.978319 32.469506l0 451.630051-127.913275 0 162.349575 162.349575 162.349575-162.349575L720.104665 672.874991z" p-id="2797" data-spm-anchor-id="a313x.7781069.0.i7" fill="#1296db" class="selected" data-v-fe84d7a0></path></svg> <svg t="1610612746140" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2973" width="20" height="20" class="icon" style="display:none;" data-v-fe84d7a0><path d="M495.765247 353.091804 333.414649 190.741205 171.065074 353.091804 304.386522 353.091804l0 420.142919c0 17.947767 14.046924 32.469506 31.978319 32.469506 17.931395 0 31.978319-14.522762 31.978319-32.469506L368.343159 353.091804 495.765247 353.091804z" p-id="2974" data-spm-anchor-id="a313x.7781069.0.i9" fill="#1296db" class="selected" data-v-fe84d7a0></path> <path d="M720.104665 672.874991 720.104665 221.24494c0-17.947767-14.046924-32.469506-31.978319-32.469506s-31.978319 14.522762-31.978319 32.469506l0 451.630051-127.913275 0 162.349575 162.349575 162.349575-162.349575L720.104665 672.874991z" p-id="2975" data-v-fe84d7a0></path></svg>
                :
                <span class="content" data-v-fe84d7a0>DESC</span></div></div> <div class="statistics" data-v-fe84d7a0><div class="title" data-v-fe84d7a0>Article Statistics</div> <div class="data" data-v-fe84d7a0>
                Article: 27
            </div> <div class="data" data-v-fe84d7a0>
                Categories: 5
            </div> <div class="data" data-v-fe84d7a0>
                Tags: 18
            </div> <div class="more" data-v-fe84d7a0><a href="/blog/archive" data-v-fe84d7a0>see more</a></div></div></div></div></span></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3aaa0c49.js" defer></script><script src="/blog/assets/js/26.2173183c.js" defer></script>
  </body>
</html>
