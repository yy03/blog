(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{474:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"centos7下安装常用软件详细过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7下安装常用软件详细过程"}},[s._v("#")]),s._v(" Centos7下安装常用软件详细过程")]),s._v(" "),t("h3",{attrs:{id:"写在前面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#写在前面"}},[s._v("#")]),s._v(" 写在前面")]),s._v(" "),t("p",[t("strong",[s._v("本次在Centos7下安装的软件包括：JDK1.8、MySQL-5.7.17、Redis-6.0.9、Elasticsearch-7.6.0、kibana-7.6.0、nginx-1.18.0、Rocketmq-4.7.1")])]),s._v(" "),t("p",[t("strong",[s._v("开启本次安装软件要开放的端口")])]),s._v(" "),t("div",{staticClass:"language-she extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mysql 3306\nfirewall-cmd --zone=public --add-port=3306/tcp --permanent\n\n# redis 6379\nfirewall-cmd --zone=public --add-port=6379/tcp --permanent\n\n# elasticsaerch 对外访问 9200\nfirewall-cmd --zone=public --add-port=9200/tcp --permanent\n\n# elasticsaerch 集群通信 9300\nfirewall-cmd --zone=public --add-port=9300/tcp --permanent\n\n# kibana 5601\nfirewall-cmd --zone=public --add-port=5601/tcp --permanent\n\n# nginx 默认的80\nfirewall-cmd --zone=public --add-port=80/tcp --permanent\n\n# rocketmq nameserver 9876\nfirewall-cmd --zone=public --add-port=9876/tcp --permanent\n\n# rocketmq broker 10911\nfirewall-cmd --zone=public --add-port=10911/tcp --permanent\n\n# 重启防火墙\nsystemctl restart firewalld\n")])])]),t("p",[t("strong",[s._v("本次安装基于tar包安装，若本机装有Docker需要将docker0虚拟网卡删除掉，并且将docker开机自启关闭，否则安装Rocketmq时会报错")])]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl stop docker\n\nip link set dev docker0 down\n\nbrctl delbr docker0\n\nsystemctl disable docker\n")])])]),t("h3",{attrs:{id:"jdk1-8安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk1-8安装"}},[s._v("#")]),s._v(" JDK1.8安装")]),s._v(" "),t("p",[t("strong",[s._v("tar包放在了/home/admin/目录下")])]),s._v(" "),t("h4",{attrs:{id:"卸载系统自带的openjdk以及相关的java文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载系统自带的openjdk以及相关的java文件"}},[s._v("#")]),s._v(" "),t("strong",[s._v("卸载系统自带的OpenJDK以及相关的java文件")])]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost /]# rpm -qa | grep java\ntzdata-java-2017b-1.el7.noarch\npython-javapackages-3.4.1-11.el7.noarch\njava-1.8.0-openjdk-1.8.0.131-11.b12.el7.x86_64\njava-1.8.0-openjdk-headless-1.8.0.131-11.b12.el7.x86_64\njavapackages-tools-3.4.1-11.el7.noarch\n[root@localhost /]# rpm -e --nodeps tzdata-java-2017b-1.el7.noarch\n[root@localhost /]# rpm -e --nodeps python-javapackages-3.4.1-11.el7.noarch\n[root@localhost /]# rpm -e --nodeps java-1.8.0-openjdk-1.8.0.131-11.b12.el7.x86_64\n[root@localhost /]# rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.131-11.b12.el7.x86_64\n[root@localhost /]# rpm -e --nodeps javapackages-tools-3.4.1-11.el7.noarch\n")])])]),t("h4",{attrs:{id:"解压安装包并配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包并配置环境变量"}},[s._v("#")]),s._v(" 解压安装包并配置环境变量")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost admin]# tar -zxvf jdk1.8.0_271.tar.gz\n[root@localhost admin]# mv jdk1.8.0_271 /usr/local/jdk\n[root@localhost admin]# vim /etc/profile\n")])])]),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#配置环境变量\nexport JAVA_HOME=/usr/local/jdk\nexport CLASSPATH=$:CLASSPATH:$JAVA_HOME/lib/\nexport PATH=$PATH:$JAVA_HOME/bin\n\n# 让配置生效\nsource /etc/profile\n")])])]),t("h3",{attrs:{id:"mysql-5-7-17安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-5-7-17安装"}},[s._v("#")]),s._v(" MySQL-5.7.17安装")]),s._v(" "),t("h4",{attrs:{id:"卸载centos7系统自带mariadb并添加mysql的用户组和用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载centos7系统自带mariadb并添加mysql的用户组和用户"}},[s._v("#")]),s._v(" 卸载CentOS7系统自带mariadb并添加mysql的用户组和用户")]),s._v(" "),t("div",{staticClass:"language-she extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost admin]# rpm -qa|grep mariadb\nmariadb-libs-5.5.56-2.el7.x86_64\n[root@localhost admin]# rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64\n# 删除etc目录下的my.cnf ，一定要删掉，等下再重新建，之前我将就用这个文件，后面改配置各种不生效\n[root@localhost admin]# rm /etc/my.cnf\n[root@localhost admin]# groupadd mysql\n[root@localhost admin]# useradd -r -g mysql mysql\n[root@localhost admin]# tar -zxvf mysql-5.7.17-linux-glibc2.5-x86_64.tar.gz\n[root@localhost admin]# mv mysql-5.7.17-linux-glibc2.5-x86_64 /usr/local/mysql\n[root@localhost admin]# cd /usr/local/\n[root@localhost local]# chown -R mysql:mysql mysql/\n[root@localhost local]# chmod -R 775 mysql/\n")])])]),t("h4",{attrs:{id:"进入mysql-bin-目录-编译安装并初始化mysql-务必记住数据库管理员临时密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入mysql-bin-目录-编译安装并初始化mysql-务必记住数据库管理员临时密码"}},[s._v("#")]),s._v(" 进入mysql/bin/目录，编译安装并初始化mysql,务必记住数据库管理员临时密码")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bin]# ./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql\n")])])]),t("h4",{attrs:{id:"编写配置文件-my-cnf-并添加配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写配置文件-my-cnf-并添加配置"}},[s._v("#")]),s._v(" 编写配置文件 my.cnf ，并添加配置")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 进入配置文件\nvi /etc/my.cnf\n\n# 在插入模式下编写，完成后保存，当然这个可以自己添加，\n\n[mysqld]\ndatadir=/usr/local/mysql/data\nport = 3306\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nsymbolic-links=0\nmax_connections=400\ninnodb_file_per_table=1\n#表名大小写不明感，敏感为\nlower_case_table_names=1\n")])])]),t("h4",{attrs:{id:"添加软连接-并启动mysql-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加软连接-并启动mysql-服务"}},[s._v("#")]),s._v(" 添加软连接，并启动mysql 服务")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost bin]# clear\n[root@localhost bin]# ln -s /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql\n[root@localhost bin]# ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql\n[root@localhost bin]# service mysql start\nStarting MySQL.Logging to '/usr/local/mysql/data/localhost.err'.\n SUCCESS!\n")])])]),t("h4",{attrs:{id:"启动mysql修改密码并开放远程链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql修改密码并开放远程链接"}},[s._v("#")]),s._v(" 启动MySQL修改密码并开放远程链接")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql -uroot -p\n\nset password for root@localhost = password('123456');\nuse mysql;\nupdate user set user.Host='%' where user.User='root';\nflush privileges;\n")])])]),t("h4",{attrs:{id:"设置开机自启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启"}},[s._v("#")]),s._v(" 设置开机自启")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("//将服务文件拷贝到init.d下，并重命名为mysql\ncp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n//赋予可执行权限\nchmod +x /etc/init.d/mysqld\n//添加服务\nchkconfig --add mysqld\n//显示服务列表\nchkconfig --list\n")])])]),t("h3",{attrs:{id:"redis-6-0-9安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-6-0-9安装"}},[s._v("#")]),s._v(" Redis-6.0.9安装")]),s._v(" "),t("h4",{attrs:{id:"安装redis6-0-9要求gcc版本不能太低-先升级gcc版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装redis6-0-9要求gcc版本不能太低-先升级gcc版本"}},[s._v("#")]),s._v(" "),t("strong",[s._v("安装Redis6.0.9要求gcc版本不能太低，先升级gcc版本")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" centos-release-scl\n\nyum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils\n\nscl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" devtoolset-9 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要注意的是scl命令启用只是临时的，退出shell或重启就会恢复原系统gcc版本。如果要长期使用gcc 9.3的话：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source /opt/rh/devtoolset-9/enable"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("/etc/profile\n")])])]),t("h4",{attrs:{id:"编译安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[s._v("#")]),s._v(" 编译安装")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf redis-6.0.3.tar.gz\n\ncd /usr/local/redis\nmake\nmake install PREFIX=/usr/local/redis\n")])])]),t("h4",{attrs:{id:"修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[s._v("#")]),s._v(" 修改配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入redis根目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/redis\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先将当前目录下的redis.conf拷贝一份到./bin目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" redis.conf ./bin/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ./bin/redis.conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主要修改下边几项")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\ndaemonize "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),t("h4",{attrs:{id:"设置开机自启-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启-2"}},[s._v("#")]),s._v(" 设置开机自启")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /lib/systemd/system/redis.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将下边粘贴进去就行了，使用systemctl命令启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Redis\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/redis_6379.pid\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -s HUP "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/kill -s QUIT "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MAINPID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机自启动")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" redis\n")])])]),t("h3",{attrs:{id:"elasticsearch-7-6-0安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-7-6-0安装"}},[s._v("#")]),s._v(" ElasticSearch-7.6.0安装")]),s._v(" "),t("p",[t("strong",[s._v("安装前准备")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ES不允许以root用户启动，需要创建非root用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" elk\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" elk -g elk -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7.6.0版本对file descriptors和virtual memory有要求")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.conf\n* soft nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300000")]),s._v("\n* hard nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300000")]),s._v("\n* soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("\n* soft memlock unlimited\n* hard memlock unlimited\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vm.max_map_count=262144"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/sysctl.conf\nsysctl -p\n")])])]),t("h4",{attrs:{id:"解压安装包修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包修改配置文件"}},[s._v("#")]),s._v(" 解压安装包修改配置文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf elasticsearch-7.6.0-linux-x86_64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-7.6.0 /usr/local/elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R elk:elk elasticsearch/\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" elasticsearch/\n\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /config/elasticsearch.yml\n\nnode.name: node-1\nnetwork.host: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\ndiscovery.seed_hosts: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.104"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncluster.initial_master_nodes: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nxpack.security.enabled: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.security.transport.ssl.enabled: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nxpack.license.self_generated.type: basic\n")])])]),t("h4",{attrs:{id:"启动elasticsearch并配置密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动elasticsearch并配置密码"}},[s._v("#")]),s._v(" 启动ElasticSearch并配置密码")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" elk\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/elasticsearch/bin\n./elasticsearch -d\n./elasticsearch-setup-passwords -interactive\n")])])]),t("h4",{attrs:{id:"设置开机自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启动"}},[s._v("#")]),s._v(" 设置开机自启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root用户下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/elasticsearch\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chkconfig: 345 63 37")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#description: elasticsearch")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#processname: elasticsearch-5.4.0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/elasticsearch\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n        start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" elk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ES_HOME")]),s._v("\n                ./bin/elasticsearch -d -p pid\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch is started"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $ES_HOME/pid"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch is stopped"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $ES_HOME/pid"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch is stopped"')]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" elk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ES_HOME")]),s._v("\n                ./bin/elasticsearch -d -p pid\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch is started"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start|stop|restart"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /etc/init.d/elasticsearch\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add elasticsearch\n")])])]),t("h3",{attrs:{id:"kibana-7-6-0安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana-7-6-0安装"}},[s._v("#")]),s._v(" Kibana-7.6.0安装")]),s._v(" "),t("h4",{attrs:{id:"解压安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包"}},[s._v("#")]),s._v(" 解压安装包")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf kibana-7.6.0-linux-x86_64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" kibana-7.6.0-linux-x86_64 /usr/local/kibana\n\n")])])]),t("h4",{attrs:{id:"修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[s._v("#")]),s._v(" 修改配置文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/kibana/config/kibana.yml\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加或修改以下配置文件 ")]),s._v("\ni18n.locale: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh-CN"')]),s._v("\nserver.port: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v("\nserver.host: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v("\nelasticsearch.hosts: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.3.103:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置elasticsearch用户名和密码")]),s._v("\nelasticsearch.username: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elastic"')]),s._v("\nelasticsearch.password: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v("\n")])])]),t("h4",{attrs:{id:"设置开机自启动-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启动-2"}},[s._v("#")]),s._v(" 设置开机自启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/kibana\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig:   2345 98  02")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# description:  kibana")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KIBANA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/kibana\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n        start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KIBANA_HOME")]),s._v("/bin/kibana --allow-root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"require start"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/init.d\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" kibana\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add kibana\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2 3 4 5 或者 3 4 5 为on就行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --list\n")])])]),t("h3",{attrs:{id:"rocketmq-4-7-1安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rocketmq-4-7-1安装"}},[s._v("#")]),s._v(" Rocketmq-4.7.1安装")]),s._v(" "),t("h4",{attrs:{id:"解压后配置开机自启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压后配置开机自启"}},[s._v("#")]),s._v(" 解压后配置开机自启")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/rocketmq\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rocketmq - this script starts and stops the rocketmq daemon")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig: - 85 15")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jdk根目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/jdk/jdk1.8.0_271\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ROCKETMQ_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/rocketmq\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ROCKETMQ_BIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ROCKETMQ_HOME}")]),s._v("/bin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.104:9876\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ROCKETMQ_HOME}")]),s._v("/logs\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAMESERVER_LOG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOG_DIR}")]),s._v("/namesrv.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BROKER_LOG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOG_DIR}")]),s._v("/broker.log\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOG_DIR}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LOG_DIR}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ROCKETMQ_HOME}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqnamesrv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${NAMESERVER_LOG}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The Name Server boot success..."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqbroker -n "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ADDR}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${BROKER_LOG}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The broker[%s, '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ADDR}")]),s._v('] boot success..."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("stop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ROCKETMQ_HOME}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqshutdown broker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqshutdown namesrv\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nstop\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nstart\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\nstart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nstart\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nstop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nstop\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nrestart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nrestart\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' {start|stop|restart}"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /etc/init.d/rocketmq\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add rocketmq\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" rocketmq on\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --list\n")])])]),t("h3",{attrs:{id:"nginx-1-18-0安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-1-18-0安装"}},[s._v("#")]),s._v(" Nginx-1.18.0安装")]),s._v(" "),t("h4",{attrs:{id:"安装c环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装c环境"}},[s._v("#")]),s._v(" 安装c环境")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc pcre-devel zlib-devel\n")])])]),t("h4",{attrs:{id:"解压安装包并编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压安装包并编译"}},[s._v("#")]),s._v(" 解压安装包并编译")]),s._v(" "),t("div",{staticClass:"language-shel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 解压到/opt/nginx目录下\ntar -zxvf nginx-1.18.0.tar.gz \nmv nginx-1.18.0 /opt/nginx\ncd /opt/nginx\n./configure\nmake\nmake install\n\n# 这样编译之后的默认目录是在/usr/local/nginx/目录下\n")])])]),t("h4",{attrs:{id:"设置开机自启-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自启-3"}},[s._v("#")]),s._v(" 设置开机自启")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /lib/systemd/system/nginx.service\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx -s reload\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx -s quit\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl start nginx\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx\n")])])]),t("h3",{attrs:{id:"部署前端项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署前端项目"}},[s._v("#")]),s._v(" 部署前端项目")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将dist文件夹中的文件（static index.html）放在/usr/local/nginx/html/目录下")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改nginx配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.conf\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.103"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#charset koi8-r;")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#access_log  logs/host.access.log  main;")]),s._v("\n\n        location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            try_files "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ /index.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#防止刷新404")]),s._v("\n            root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置反向代理")]),s._v("\n         location /api "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  rewrite  ^.+api/?(.*)$ /$1 break;  # 一般前端项目到后端为/api/*** 这样是去掉/api，看后端url请求判断是否去掉")]),s._v("\n            proxy_pass  http://192.168.3.103:30002"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后端项目地址")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#error_page  404              /404.html;")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redirect server error pages to the static page /50x.html")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n        error_page   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        location "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);